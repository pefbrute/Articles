# Системные Вызовы в ОС

Мы используемые системные вызовы, чтобы предоставить интерфейсы между процессом и ОС.
Системный запрос помогает процессу запрашивать службы из ядра. Это программный метод и единственная точка входа в систему ядра. Эти услуги предлагаются с помощью API (интерфейс прикладного программирования).

## Введение

### Работа системного вызова в ОС
Ниже приведены шаги по работе системного вызова:
Шаг 1: Процессор выполняет процесс в пользовательском режиме до тех пор, пока его не прервет системный вызов.
Шаг 2: Затем в приоритетном порядке системный вызов выполняется в режиме ядра.
Шаг 3: После завершения выполнения системного вызова управление возвращается в пользовательский режим.
Шаг 4: Выполнение возобновляется в режиме ядра.

### Необходимость Системных Вызовов
Ниже приведены причины, по которым нам нужны системные вызовы:
- Чтение и запись из файлов.
- Для создания или удаления файлов.
- Создавать и управлять новыми процессами.
- Для отправки и получения пакетов через сетевые соединения.
- Для доступа к аппаратным устройствам.

### Службы системного вызова в операционной системе
Ниже приведены услуги, предоставляемые системным вызовом:
- Управляет основной памятью
- Помогает получить доступ к файлам и каталогам и управляет файловой системой.
- Создает и управляет новыми процессами.
- Обработка устройств ввода/вывода
- Обеспечивает защиту системы

### Типы системных вызовов в операционной системе
Пять типов системных вызовов:

#### 1. Управление процессом
Он выполняет задачи создания процесса, завершения процесса и т. д.

Функции управления процессом:
- Конец и прерывание
- Загрузка и выполнение процесса
- Создание и завершение Процесса
- Ожидание и сигнальное событие
- Выделение свободной памяти

#### 2. Управление файлами
Он выполняет задания, связанные с управлением файлами.

Функции управления файлами:
Создание файла
Удаление файла
Открытие и закрытие файла
Чтение, письмо и перемещение
Получение и установка атрибутов файла

#### 3. Управление устройствами
Это помогает в манипуляциях с устройствами, таких как чтение из буферов устройств, запись в буферы устройств и т.д.

Функции управления устройством:
Запрос и освобождение устройств
Логическое подключение и отсоединение устройств
Получение и настройка атрибутов устройства

#### 4. Обслуживание информации
Он обрабатывает информацию и ее передачу между ОС и пользовательской программой.

Функции информационного обслуживания:
Получение или установка времени и даты
Получение атрибутов процесса и устройства

#### 5. Общение
Это для межпроцессного взаимодействия.
Функции межпроцессного взаимодействия:
- Создание и удаление коммуникационных соединений
- Отправка и получение сообщений
- Помощь в передаче информации о состоянии ОС.
- Подключение или отключение удаленных устройств

## Правила передачи параметров для системного вызова
Ниже приведены правила передачи параметров в системный вызов:
- ОС добавляет или извлекает параметры из стека.
— Мы можем передавать параметры в регистры.
- Если параметров больше, чем регистров, они сохраняются в блоке. Адрес блока передается в качестве параметра в регистр.

## Важные системные вызовы, используемые в ОС
Ниже приведены важные системные вызовы, используемые в ОС:

### 1. `wait()`
Когда процесс запущен, остальные процессы остаются в состоянии ожидания и ждут своей очереди. Это происходит, когда родительский процесс создает дочерний процесс, и родительский процесс приостанавливается до тех пор, пока дочерний процесс не завершится. Приостановка родительского процесса происходит автоматически с помощью системного вызова wait(). Управление возвращается к родительскому процессу после завершения выполнения дочернего процесса.

### 2. `fork()`
Этот системный вызов позволяет процессу создавать процессы копирования самого себя. Родительский процесс создает дочерний процесс. Это приостанавливает выполнение родительского процесса до тех пор, пока не выполнится дочерний процесс.

### 3. `exec()`
Этот системный вызов запускается, когда исполняемый файл заменяет старый, когда процесс еще работает. Хотя исходный идентификатор процесса все еще остается, поскольку старый процесс все еще выполняется, новый процесс заменяет такие вещи, как стек, данные, заголовок и т. д.

### 4. `kill()`
Этот системный вызов отправляет сигнал завершения процессу и призывает его завершить работу. Однако на самом деле это не убивает процесс, но может иметь различные значения.

### 5. `exit()`
Этот системный вызов завершает процесс. выполнение программы. Он определяет, что выполнение потока завершено и ОС может вернуть ресурсы, используемые процессом.

## Заключение
Системные вызовы предоставляют интерфейс между процессом и ОС. Некоторые из самых важных и используемых системных вызов, в ОС, это `wait()`, `fork()`, `exec()`, `kill()`, `exit()`.

| Категории |	Windows |	Unix |
| --- | --- | --- |
| Контроль Процесса |	CreateProcess(), ExitProcess(), WaitForSingleObject() |	fork(), exit(), wait() |
| Управление Устройствами |	SetConsoleMode(), ReadConsole(), WriteConsole() |	ioctl(), read(), write() |
| Управление Файлами |	CreateFile(), ReadFile(), WriteFile(), CloseHandle() |	open(), read(), write(), close() |
| Поддержка Информации |	GetCurrentProcessID(), SetTimer(), Sleep() |	getpid(), alarm(), sleep() |
| Коммуникация |	CreatePipe(), CreateFileMapping(), MapViewOfFile() |	pipe(), shm_open(), mmap() |
| Защита |	SetFileSecurity(), InitializeSecurityDescriptor(), SetSecurityDescriptor Group() |	chmod(), umask(), chown() |

Источник: "https://data-flair.training/blogs/system-call-in-os/"
