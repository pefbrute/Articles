# Системные Вызовы в ОС

Мы используем системные вызовы для обеспечения взаимодействия между процессом и операционной системой.
Системный вызов помогает программе запрашивать услуги у ядра операционной системы. При этом системный вызов является единственной точкой входа в ядро операционной системы. Эти службы предоставляются с помощью API (интерфейса прикладного программирования).

## Введение

![Introduction](https://github.com/pefbrute/Articles/blob/main/%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B/%22%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5%20%D0%92%D1%8B%D0%B7%D0%BE%D0%B2%D1%8B%22%20%D0%BE%D1%82%20DataFlair/intrdctn.jpg)

### Принцип Работы Системного Вызова в ОС
Ниже приведены шаги по работе системного вызова:
- Шаг 1: Процессор выполняет процесс в пользовательском режиме, пока системный вызов не прервёт его.
- Шаг 2: Затем системный вызов выполняется в режиме ядра с учетом приоритета.
- Шаг 3: По завершении выполнения системного вызова управление возвращается в пользовательский режим.
- Шаг 4: Выполнение продолжается в режиме ядра.

![Workings of a System Call](https://github.com/pefbrute/Articles/blob/main/%D0%9F%D0%B5%D1%80%D0%B5%D0%B2%D0%BE%D0%B4%D1%8B/%22%D0%A1%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D0%BD%D1%8B%D0%B5%20%D0%92%D1%8B%D0%B7%D0%BE%D0%B2%D1%8B%22%20%D0%BE%D1%82%20DataFlair/working.jpg)

### Необходимость Системных Вызовов
Ниже приведены причины, по которым нам нужны системные вызовы:
- Чтение и запись из файлов.
- Для создания или удаления файлов.
- Создавать и управлять новыми процессами.
- Для отправки и получения пакетов через сетевые соединения.
- Для доступа к аппаратным устройствам.

### Службы системного вызова в операционной системе
Ниже приведены услуги, предоставляемые системным вызовом:
- Управляет основной памятью
- Помогает получить доступ к файлам и каталогам и управляет файловой системой.
- Создает и управляет новыми процессами.
- Обработка устройств ввода/вывода
- Обеспечивает защиту системы

### Типы системных вызовов в операционной системе
Пять типов системных вызовов:

#### 1. Управление процессом
Он выполняет задачи создания процесса, завершения процесса и т. д.

Функции управления процессом:
- Конец и прерывание
- Загрузка и выполнение процесса
- Создание и завершение Процесса
- Ожидание и сигнальное событие
- Выделение свободной памяти

#### 2. Управление файлами
Он выполняет задания, связанные с управлением файлами.

Функции управления файлами:
Создание файла
Удаление файла
Открытие и закрытие файла
Чтение, письмо и перемещение
Получение и установка атрибутов файла

#### 3. Управление устройствами
Это помогает в манипуляциях с устройствами, таких как чтение из буферов устройств, запись в буферы устройств и т.д.

Функции управления устройством:
Запрос и освобождение устройств
Логическое подключение и отсоединение устройств
Получение и настройка атрибутов устройства

#### 4. Обслуживание информации
Он обрабатывает информацию и ее передачу между ОС и пользовательской программой.

Функции информационного обслуживания:
Получение или установка времени и даты
Получение атрибутов процесса и устройства

#### 5. Общение
Это для межпроцессного взаимодействия.
Функции межпроцессного взаимодействия:
- Создание и удаление коммуникационных соединений
- Отправка и получение сообщений
- Помощь в передаче информации о состоянии ОС.
- Подключение или отключение удаленных устройств

## Правила передачи параметров для системного вызова
Ниже приведены правила передачи параметров в системный вызов:
- ОС добавляет или извлекает параметры из стека.
— Мы можем передавать параметры в регистры.
- Если параметров больше, чем регистров, они сохраняются в блоке. Адрес блока передается в качестве параметра в регистр.

## Важные системные вызовы, используемые в ОС
Ниже приведены важные системные вызовы, используемые в ОС:

### 1. `wait()`
Когда один процесс активен, остальные ждут своей очереди. Если родительский процесс создает дочерний, он приостанавливается до завершения дочернего процесса. Родительский процесс автоматически приостанавливается с использованием системного вызова `wait()`. После завершения дочернего процесса управление возвращается к родительскому.

### 2. `fork()`
С помощью этого системного вызова процесс может породить копию самого себя, создавая дочерний процесс. Это приостанавливает выполнение родительского процесса до завершения дочернего.

### 3. `exec()`
Этот системный вызов активируется, когда новый исполняемый файл заменяет предыдущий в запущенном процессе. Несмотря на то, что идентификатор исходного процесса остается неизменным, новый процесс заменяет элементы, включая стек, данные и заголовок.

### 4. `kill()`
С помощью этого системного вызова отправляется сигнал, указывающий процессу завершить свою работу. Важно заметить, что процесс не уничтожается полностью, а результаты могут быть различными.

### 5. `exit()`
Данный системный вызов прекращает выполнение процесса. Он сигнализирует, что выполнение потока завершено, и операционная система может вернуть себе ресурсы, ранее занятые процессом.

## Заключение
Системные вызовы обеспечивают взаимодействие между процессом и операционной системой. В ОС применяются ключевые системные вызовы, такие как `wait()`, `fork()`, `exec()`, `kill()`, `exit()`.

| Категории |	Windows |	Unix |
| --- | --- | --- |
| Контроль Процесса |	CreateProcess(), ExitProcess(), WaitForSingleObject() |	fork(), exit(), wait() |
| Управление Устройствами |	SetConsoleMode(), ReadConsole(), WriteConsole() |	ioctl(), read(), write() |
| Управление Файлами |	CreateFile(), ReadFile(), WriteFile(), CloseHandle() |	open(), read(), write(), close() |
| Поддержка Информации |	GetCurrentProcessID(), SetTimer(), Sleep() |	getpid(), alarm(), sleep() |
| Коммуникация |	CreatePipe(), CreateFileMapping(), MapViewOfFile() |	pipe(), shm_open(), mmap() |
| Защита |	SetFileSecurity(), InitializeSecurityDescriptor(), SetSecurityDescriptor Group() |	chmod(), umask(), chown() |

Источник: "https://data-flair.training/blogs/system-call-in-os/"
